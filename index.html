<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8">
<link rel="stylesheet" href="styles.css">
<body>
	<div class="float">
		<!--<button onclick="start()">Click here To start process</button>-->
		<div class="results-center" style="justify-content: left; position: fixed;">
			<button onclick="tree.zoomToFit(duration = 500)" class="btn">Zoom Out</button>
			<button onclick="tree.resetZoom(duration = 500)" class="btn">Reset</button>
		</div>
		<input type="text" id="search" class="textBoxSearch" autocomplete="off">
		<img class="btnCancel" src="https://static.thenounproject.com/png/240993-200.png" onclick="cancelSearch()">
		<br>
		<div class="results-center">
			<div id="results" class="results"></div>
		</div>
	</div>
    <div id="graph"></div>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/lodash/4.17.4/lodash.min.js"></script>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="dTree.min.js"></script>
	<script src="app.js"></script>

	<script>
		var tree;
      treeJson = d3.json("data.json", function(error, treeData) {
		tree = dTree.init(treeData,
					{
						target: "#graph",
						debug: true,
						hideMarriageNodes: true,
						marriageNodeSize: 5,
						height: 800,
						width: 1200,
						callbacks: {
							nodeClick: function(name, extra) {
								alert('Click: ' + name);
							},
							nodeRightClick: function(name, extra) {
								alert('Right-click: ' + name);
							},
							textRenderer: function(name, extra, textClass) {
								if (extra && extra.nickname)
									name = name + " (" + extra.nickname + ")";
								if(extra && extra.Hebrewname){
									if(extra.Hebrewname == 'null') hName = '';
									else hName = "<br><p align='center' class='descibe'>" + extra.Hebrewname + "</p>";
								} else hName = '';
								if(extra && extra.Dates){
									if(extra.Dates == 'null') Dates = '';
									else Dates = "<br><p align='center' class='dates'>" + extra.Dates + "</p>";
								} else Dates = '';
								if(extra && extra.Gener) Gen = "<div style='display: flex; justify-content: center'><div class='circle'>" + extra.Gener + "</div></div>";
								else Gen = '';
								return Gen + "<br><p align='center' class='" + textClass + "'>" + name + "</p>" + hName + Dates;
							},
							nodeRenderer: function(name, x, y, height, width, extra, id, nodeClass, textClass, textRenderer) {
								list[name] = id;
								gens[id] = extra.Gener;
								let node = '';
      							node += '<div ';
      							node += 'style="height:100%;width:100%;" ';
      							node += 'class="' + nodeClass + '" ';
      							node += 'id="node' + id + '">\n';
      							node += textRenderer(name, extra, textClass);
      							node += '</div>';
      							return node;
							},
							marriageClick: function(extra, id) {
								alert('Clicked marriage node' + id);
							},
							marriageRightClick: function(extra, id) {
								alert('Right-clicked marriage node' + id);
							},
						}
					});
    	});
    </script>
</body>
</html>